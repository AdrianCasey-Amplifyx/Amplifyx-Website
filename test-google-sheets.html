<\!DOCTYPE html>
<html>
<head>
    <title>Test Google Sheets Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background: #0f0f1e;
            color: white;
        }
        button {
            background: linear-gradient(135deg, #7B3FF2, #E94CFF);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover { opacity: 0.9; }
        .success { color: #2ed573; background: rgba(46, 213, 115, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; }
        .error { color: #ff4757; background: rgba(255, 71, 87, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; }
        .info { background: rgba(123, 63, 242, 0.1); padding: 10px; border-radius: 5px; margin: 10px 0; }
        #result { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üß™ Test Google Sheets Integration</h1>
    
    <div class="info">
        <p><strong>Google Sheet:</strong> <a href="https://docs.google.com/spreadsheets/d/12TaySxxboYefkcMFQmYxhgWUx1dyIQrc-QL13RDK2jQ/edit" target="_blank" style="color: #E94CFF;">Open Spreadsheet</a></p>
        <p><strong>Web App URL:</strong> Configured ‚úÖ</p>
    </div>

    <button onclick="testConnection()">1. Test Connection</button>
    <button onclick="sendTestLead()">2. Send Test Lead</button>
    <button onclick="sendHighValueLead()">3. Send High-Value Lead (Email Alert)</button>
    
    <div id="result"></div>

    <script src="js/google-sheets-integration.js"></script>
    <script>
        const resultDiv = document.getElementById('result');
        
        async function testConnection() {
            resultDiv.innerHTML = '<div class="info">Testing connection to Google Sheets...</div>';
            
            try {
                const response = await fetch(GOOGLE_SHEETS_WEBHOOK_URL);
                const data = await response.json();
                
                if (data.status === 'ready') {
                    resultDiv.innerHTML = `<div class="success">‚úÖ Connection successful\!<br>Message: ${data.message}</div>`;
                } else {
                    resultDiv.innerHTML = `<div class="error">‚ùå Connection failed: ${JSON.stringify(data)}</div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="error">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        async function sendTestLead() {
            resultDiv.innerHTML = '<div class="info">Sending test lead to Google Sheets...</div>';
            
            const testLead = {
                referenceNumber: 'TEST-' + Date.now(),
                name: 'Test User',
                email: 'test@example.com',
                phone: '0400123456',
                company: 'Test Company',
                projectType: 'Testing Integration',
                timeline: '1-3 months',
                budget: '$25k',
                score: 45,
                qualified: false,
                conversation: [
                    { role: 'assistant', content: 'Welcome\! How can I help you today?' },
                    { role: 'user', content: 'I need help with AI integration' },
                    { role: 'assistant', content: 'Great\! Let me help you with that.' }
                ]
            };
            
            const success = await sendToGoogleSheets(testLead);
            
            if (success) {
                resultDiv.innerHTML = `
                    <div class="success">
                        ‚úÖ Test lead sent successfully\!<br>
                        Reference: ${testLead.referenceNumber}<br>
                        Score: ${testLead.score} (Medium priority)<br>
                        <a href="https://docs.google.com/spreadsheets/d/12TaySxxboYefkcMFQmYxhgWUx1dyIQrc-QL13RDK2jQ/edit" target="_blank" style="color: #E94CFF;">Check your spreadsheet</a>
                    </div>`;
            } else {
                resultDiv.innerHTML = '<div class="error">‚ùå Failed to send test lead. Check console for details.</div>';
            }
        }
        
        async function sendHighValueLead() {
            resultDiv.innerHTML = '<div class="info">Sending high-value lead (this will trigger an email alert)...</div>';
            
            const hotLead = {
                referenceNumber: 'HOT-' + Date.now(),
                name: 'Sarah Johnson',
                email: 'sarah@techcorp.com',
                phone: '0412345678',
                company: 'TechCorp Industries',
                projectType: 'AI Chatbot Implementation',
                timeline: 'ASAP',
                budget: '$75k',
                score: 85,
                qualified: true,
                conversation: [
                    { role: 'assistant', content: 'Welcome to Amplifyx\! How can I help?' },
                    { role: 'user', content: 'We need to implement an AI chatbot ASAP for our 5000 customers' },
                    { role: 'assistant', content: 'Perfect\! We can deliver that within 6 weeks.' },
                    { role: 'user', content: 'Great, we have $75k budget allocated' },
                    { role: 'assistant', content: 'Excellent\! Let me collect your details.' }
                ]
            };
            
            const success = await sendToGoogleSheets(hotLead);
            
            if (success) {
                resultDiv.innerHTML = `
                    <div class="success">
                        üî• HOT LEAD sent successfully\!<br>
                        Reference: ${hotLead.referenceNumber}<br>
                        Score: ${hotLead.score} (HIGH PRIORITY)<br>
                        ‚úâÔ∏è Email notification sent to adrian@amplifyx.com.au<br>
                        <a href="https://docs.google.com/spreadsheets/d/12TaySxxboYefkcMFQmYxhgWUx1dyIQrc-QL13RDK2jQ/edit" target="_blank" style="color: #E94CFF;">Check your spreadsheet</a>
                    </div>`;
            } else {
                resultDiv.innerHTML = '<div class="error">‚ùå Failed to send hot lead. Check console for details.</div>';
            }
        }
    </script>
</body>
</html>
